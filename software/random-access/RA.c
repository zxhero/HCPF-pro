#ifndef _RA_#define _RA_#include"../HCPF.h"__attribute__((section(".zxhero"))) long global = -100;void TestReadWrite(){    unsigned long  begin2 = rdcycle();    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    unsigned long end2 = rdcycle();    printk("MMIO total cycle is %lx\n", end2-begin2);    begin2 = rdcycle();    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    end2 = rdcycle();    printk("MMIO total cycle is %lx\n", end2-begin2);    begin2 = rdcycle();    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    end2 = rdcycle();    printk("MMIO total cycle is %lx\n", end2-begin2);    begin2 = rdcycle();    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    end2 = rdcycle();    printk("MMIO total cycle is %lx\n", end2-begin2);    begin2 = rdcycle();    reg_write64(READ_OFFSET2,Read_Format(0,0,0));    end2 = rdcycle();    printk("MMIO total cycle is %lx\n", end2-begin2);}/*test MMIO read speed*/void CacheMissAccess(){    printk("start loop 1\n");    unsigned long begin = rdcycle();    int j;    int* p;    int sum = 0,temp=0;    for(  p = (int*)0x80000000,  j=0; j < 640;j++, p = (int*)((char*)p + 64)){  //1536        temp = *(int*)p;        sum += temp;//        sum += *((int*)p + 1);        *(int*)p = temp;        p = (int*)((char*)p + 64);        sum += *(int*)p;//        sum += *((int*)p + 1);        p = (int*)((char*)p + 64);        sum += *(int*)p;//        sum += *((int*)p + 1);    }    unsigned long end = rdcycle();    printk("%x,cache miss total cycle is %lx\n", sum, end-begin);    printk("start loop 2\n");    sum=0;    int k,h;    uint64_t data;    uint64_t status = 0;    uint64_t rdbuf_ptr = 0, wtbuf_ptr = 0;    uint64_t addr = 0x0000000010000000;    reg_write8(RESET_PTR,1);    reg_write8(RESET_PTR,0);    unsigned long  begin2 = rdcycle();    for(k = 0;k < 64;k++,rdbuf_ptr+=2,addr += 64){       reg_write64(REQUEST_ADDR,Get_Read_Request(8,rdbuf_ptr,addr,1));    }    for(k = 0;k < 64;k++,rdbuf_ptr+=2,addr += 64){       reg_write64(REQUEST_ADDR,Get_Read_Request(8,rdbuf_ptr,addr,2));    }    for(k = 0;k < 64;k++,rdbuf_ptr+=2,addr += 64){        reg_write64(REQUEST_ADDR,Get_Read_Request(8,rdbuf_ptr,addr,3));    }    for(rdbuf_ptr = 0,j = 0; j < 9;j++,rdbuf_ptr = 0){        do{            status = reg_read64(READ_STATUS3);        }while(status != 0xffffffffffffffff);        for(k=0;k<64;k++,wtbuf_ptr+=2){            data = reg_read64(READ_DATA1_L);            sum += (int) data;            sum += (data >> 32);            data = reg_read64(READ_DATA2_L);            sum += (int) data;            sum += (data >> 32);            data = reg_read64(READ_DATA3_L);            sum += (int) data;            sum += (data >> 32);            reg_write64(RFrequest, Get_ReadF_WB_Request(8,0,wtbuf_ptr,0));            reg_write64(RFrequest, Get_ReadF_Request(0,7));        }        for(k = 0;k < 64;k++,rdbuf_ptr+=2,addr += 64){            reg_write64(REQUEST_ADDR,Get_Read_Request(8,rdbuf_ptr,addr,1));        }        for(k = 0;k < 64;k++,rdbuf_ptr+=2,addr += 64){            reg_write64(REQUEST_ADDR,Get_Read_Request(8,rdbuf_ptr,addr,2));        }        for(k = 0;k < 64;k++,rdbuf_ptr+=2,addr += 64){            reg_write64(REQUEST_ADDR,Get_Read_Request(8,rdbuf_ptr,addr,3));        }    }    do{            status = reg_read64(READ_STATUS3);        }while(status != 0xffffffffffffffff);    for(k=0;k<64;k++){            data = reg_read64(READ_DATA1_L);            sum += (int) data;            sum += (data >> 32);            data = reg_read64(READ_DATA2_L);            sum += (int) data;            sum += (data >> 32);            data = reg_read64(READ_DATA3_L);            sum += (int) data;            sum += (data >> 32);            reg_write64(RFrequest, Get_ReadF_WB_Request(8,0,wtbuf_ptr,0));            reg_write64(RFrequest, Get_ReadF_Request(0,7));    }    unsigned long end2 = rdcycle();    printk("%x, MMIO total cycle is %lx\n", sum,end2-begin2);}void RandomAccess(){}#endif